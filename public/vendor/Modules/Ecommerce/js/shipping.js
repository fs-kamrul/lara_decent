(()=>{function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(t,r){for(var a=0;a<r.length;a++){var n=r[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,r){if("object"!==e(t)||null===t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var n=a.call(t,r||"default");if("object"!==e(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(i,"string"),"symbol"===e(o)?o:String(o)),n)}var i,o}var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var r,a,n;return r=e,a=[{key:"init",value:function(){$(document).on("click",".btn-confirm-delete-region-item-modal-trigger",(function(e){e.preventDefault();var t=$("#confirm-delete-region-item-modal");t.find(".region-item-label").text($(e.currentTarget).data("name")),t.find("#confirm-delete-region-item-button").data("id",$(e.currentTarget).data("id")),t.modal("show")})),$(document).on("click","#confirm-delete-region-item-button",(function(e){e.preventDefault();var t=$(e.currentTarget);t.addClass("button-loading"),$.ajax({type:"POST",url:$("div[data-delete-region-item-url]").data("delete-region-item-url"),data:{_method:"DELETE",id:t.data("id")},success:function(e){e.error?kamruldashboard.showError(e.message):($(".wrap-table-shipping-"+t.data("id")).remove(),kamruldashboard.showSuccess(e.message)),$("#confirm-delete-region-item-modal").modal("hide")},error:function(e){kamruldashboard.handleError(e)},complete:function(){t.removeClass("button-loading")}})})),$(document).on("click",".btn-confirm-delete-price-item-modal-trigger",(function(e){e.preventDefault();var t=$("#confirm-delete-price-item-modal");t.find(".region-price-item-label").text($(e.currentTarget).data("name")),t.find("#confirm-delete-price-item-button").data("id",$(e.currentTarget).data("id")),t.modal("show")})),$(document).on("click","#confirm-delete-price-item-button",(function(e){e.preventDefault();var t=$(e.currentTarget);t.addClass("button-loading"),$.ajax({type:"POST",url:$("div[data-delete-rule-item-url]").data("delete-rule-item-url"),data:{_method:"DELETE",id:t.data("id")},success:function(e){e.error?kamruldashboard.showError(e.message):($(".box-table-shipping-item-"+t.data("id")).remove(),0===e.data.count&&$(".wrap-table-shipping-"+e.data.shipping_id).remove(),kamruldashboard.showSuccess(e.message)),$("#confirm-delete-price-item-modal").modal("hide")},error:function(e){kamruldashboard.handleError(e)},complete:function(){t.removeClass("button-loading")}})}));var e=function(e,t,r,a){$(document).find(".field-has-error").removeClass("field-has-error");var n=e;n.addClass("button-loading");var i=[];"POST"!==r&&(i._method=r),$.each(t.serializeArray(),(function(e,t){"from"!==t.name&&"to"!==t.name&&"price"!==t.name||t.value&&(t.value=parseFloat(t.value.replace(",","")).toFixed(2)),i[t.name]=t.value})),a&&(i.shipping_id=a),i=$.extend({},i),$.ajax({type:"POST",url:t.prop("action"),data:i,success:function(e){var t,r,i;if(e.error)kamruldashboard.showError(e.message);else if(kamruldashboard.showSuccess(e.message),null!=e&&null!==(t=e.data)&&void 0!==t&&null!==(r=t.rule)&&void 0!==r&&r.shipping_id&&null!=e&&null!==(i=e.data)&&void 0!==i&&i.html){var o=$(".wrap-table-shipping-"+e.data.rule.shipping_id+" .pd-all-20.border-bottom"),l=o.find(".box-table-shipping-item-"+e.data.rule.id);l.length?l.replaceWith(e.data.html):o.append(e.data.html),kamruldashboard.initResources()}a&&n.closest(".modal").modal("hide")},error:function(e){kamruldashboard.handleError(e)},complete:function(){n.removeClass("button-loading")}})};function t(e,t,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};$.ajax({type:"GET",url:e,data:a,beforeSend:function(){r&&r.addClass("button-loading"),t.addClass("table-loading")},success:function(e){e.error?kamruldashboard.showError(e.message):t.replaceWith(e.data.html)},error:function(e){kamruldashboard.handleError(e)},complete:function(){r&&r.removeClass("button-loading")}})}$(document).on("click",".btn-save-rule",(function(t){t.preventDefault();var r=$(t.currentTarget);e(r,r.closest("form"),"PUT",null)})),$(document).on("change",".select-rule-type",(function(e){e.preventDefault();var t=$(e.currentTarget),r=t.closest("form"),a=t.find("option:selected");a.data("show-from-to")?r.find(".rule-from-to-inputs").removeClass("d-none"):r.find(".rule-from-to-inputs").addClass("d-none"),r.find(".unit-item-label").text(a.data("unit")),r.find(".rule-from-to-label").text(a.data("text"))})),$(document).on("keyup",".input-sync-item",(function(e){var t=$(e.currentTarget),r=t.val();r&&!isNaN(r)||(r=0),t.closest(".input-shipping-sync-wrapper").find(t.data("target")).text(kamruldashboard.numberFormat(parseFloat(r),2))})),$(document).on("keyup",".input-sync-text-item",(function(e){var t=$(e.currentTarget);t.closest(".input-shipping-sync-wrapper").find(t.data("target")).text(t.val())})),$(document).on("keyup",".input-to-value-field",(function(e){var t=$(e.currentTarget),r=t.closest(".input-shipping-sync-wrapper");t.val()?(r.find(".rule-to-value-wrap").removeClass("hidden"),r.find(".rule-to-value-missing").addClass("hidden")):(r.find(".rule-to-value-wrap").addClass("hidden"),r.find(".rule-to-value-missing").removeClass("hidden"))})),$(document).on("click",".btn-add-shipping-rule-trigger",(function(e){e.preventDefault();var t=$(e.currentTarget),r=$("#add-shipping-rule-item-modal");$("#add-shipping-rule-item-button").data("shipping-id",t.data("shipping-id")),r.find("select[name=type] option[disabled]").prop("disabled",!1),t.data("country")||r.find("select[name=type] option[value=base_on_zip_code]").prop("disabled",!0),r.find("input[name=name]").val(""),r.find("select[name=type]").val("").trigger("change"),r.find("input[name=from]").val("0"),r.find("input[name=to]").val(""),r.find("input[name=price]").val("0"),r.modal("show")})),$(document).on("click",".btn-shipping-rule-item-trigger",(function(e){e.preventDefault();var t=$(e.currentTarget),r=$("#form-shipping-rule-item-detail-modal");r.modal("show"),$.ajax({type:"GET",url:t.data("url"),beforeSend:function(){r.find(".modal-title strong").html(""),r.find(".modal-body").html('<div class="w-100 text-center py-3"><div class="spinner-border" role="status">\n                    <span class="visually-hidden">Loading...</span>\n                  </div></div>')},success:function(e){e.error?kamruldashboard.showError(e.message):(r.find(".modal-body").html(e.data.html),r.find(".modal-title strong").html(e.message),kamruldashboard.initResources())},error:function(e){kamruldashboard.handleError(e)}})})),$(document).on("click","#save-shipping-rule-item-detail-button",(function(e){e.preventDefault();var t=$(e.currentTarget),r=$("#form-shipping-rule-item-detail-modal"),a=r.find("form");$.ajax({type:a.prop("method"),url:a.prop("action"),data:a.serialize(),beforeSend:function(){t.addClass("button-loading")},success:function(e){if(e.error)kamruldashboard.showError(e.message);else{var t=$(".table-shipping-rule-"+e.data.shipping_rule_id);t.find(".shipping-rule-item-"+e.data.id).length?t.find(".shipping-rule-item-"+e.data.id).replaceWith(e.data.html):t.prepend(e.data.html),r.modal("hide"),kamruldashboard.showSuccess(e.message)}},error:function(e){kamruldashboard.handleError(e)},complete:function(){t.removeClass("button-loading")}})})),$(document).on("click",".btn-confirm-delete-rule-item-modal-trigger",(function(e){e.preventDefault();var t=$("#confirm-delete-shipping-rule-item-modal");t.find(".item-label").text($(e.currentTarget).data("name")),t.find("#confirm-delete-shipping-rule-item-button").data("url",$(e.currentTarget).data("section")),t.modal("show")})),$(document).on("click","#confirm-delete-shipping-rule-item-button",(function(e){e.preventDefault();var t=$(e.currentTarget);t.addClass("button-loading"),$.ajax({type:"POST",url:t.data("url"),data:{_method:"DELETE"},success:function(e){if(e.error)kamruldashboard.showError(e.message);else{var t=$(".table-shipping-rule-"+e.data.shipping_rule_id);t.find(".shipping-rule-item-"+e.data.id).length&&t.find(".shipping-rule-item-"+e.data.id).fadeOut(500,(function(){$(this).remove()})),kamruldashboard.showSuccess(e.message)}$("#confirm-delete-shipping-rule-item-modal").modal("hide")},error:function(e){kamruldashboard.handleError(e)},complete:function(){t.removeClass("button-loading")}})})),$(document).find(".select-country-search").select2({width:"100%",dropdownParent:$("#select-country-modal")}),$(document).on("click",".btn-select-country",(function(e){e.preventDefault(),$("#select-country-modal").modal("show")})),$(document).on("click","#add-shipping-region-button",(function(e){e.preventDefault();var t=$(e.currentTarget);t.addClass("button-loading");var r=t.closest(".modal-content").find("form");$.ajax({type:"POST",url:r.prop("action"),data:r.serialize(),success:function(e){e.error?kamruldashboard.showError(e.message):(kamruldashboard.showSuccess(e.message),$(".wrapper-content").load(window.location.href+" .wrapper-content > *")),t.removeClass("button-loading"),$("#select-country-modal").modal("hide")},error:function(e){kamruldashboard.handleError(e),t.removeClass("button-loading")}})})),$(document).on("click","#add-shipping-rule-item-button",(function(t){t.preventDefault(),e($(t.currentTarget),$(t.currentTarget).closest(".modal-content").find("form"),"POST",$(t.currentTarget).data("shipping-id"))})),$(document).on("keyup",".base-price-rule-item",(function(e){var t=$(e.currentTarget).val();t&&!isNaN(t)||(t=0),$.each($(document).find(".support-shipping .rule-adjustment-price-item"),(function(e,r){var a=$(r).closest("tr").find(".shipping-price-district").val();a&&!isNaN(a)||(a=0),$(r).text(kamruldashboard.numberFormat(parseFloat(t)+parseFloat(a)),2)}))})),$(document).on("change","select[name=shipping_rule_id].shipping-rule-id",(function(e){e.preventDefault();var t=$(e.currentTarget),r=t.closest("form"),a=r.find('select[data-type="country"]'),n=t.find("option:selected").data("country");a.length?a.val()!=n&&a.val(n).trigger("change"):(a=r.find('input[name="country"]')).length&&a.val()!=n&&a.val(n)})),$(document).on("click",".table-shipping-rule-items .shipping-rule-load-items",(function(e){e.preventDefault();var r=$(e.currentTarget),a=r.closest(".table-shipping-rule-items");t(r.attr("href"),a,r)})),$(document).on("click",".table-shipping-rule-items a.page-link",(function(e){e.preventDefault();var r=$(e.currentTarget),a=r.closest(".table-shipping-rule-items");t(r.attr("href"),a,r)})),$(document).on("change",".table-shipping-rule-items .number-record .numb",(function(e){e.preventDefault();var r=$(e.currentTarget),a=r.val();if(!isNaN(a)&&a>0){var n=r.closest(".table-shipping-rule-items"),i=n.find("thead tr th[data-column][data-dir]"),o={per_page:a};i.length&&(o.order_by=i.data("column"),o.order_dir=i.data("dir")||"DESC"),t(n.data("url"),n,r,o)}else r.val(r.attr("min")||12).trigger("change")})),$(document).on("click",".table-shipping-rule-items thead tr th[data-column]",(function(e){e.preventDefault();var r=$(e.currentTarget),a=r.data("column"),n=r.data("dir")||"ASC";n="ASC"==n?"DESC":"ASC";var i=r.closest(".table-shipping-rule-items"),o=i.find(".number-record .numb").val();t(i.data("url"),i,r,{order_by:a,order_dir:n,per_page:o})}))}}],a&&t(r.prototype,a),n&&t(r,n),Object.defineProperty(r,"prototype",{writable:!1}),e}();$((function(){(new r).init()}))})();