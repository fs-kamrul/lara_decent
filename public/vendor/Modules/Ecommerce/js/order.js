(()=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},r(e)}function e(e,a){for(var o=0;o<a.length;o++){var t=a[o];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,(n=t.key,s=void 0,s=function(e,a){if("object"!==r(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var t=o.call(e,a||"default");if("object"!==r(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===a?String:Number)(e)}(n,"string"),"symbol"===r(s)?s:String(s)),t)}var n,s}var a=function(){function r(){!function(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r)}var a,o,t;return a=r,(o=[{key:"init",value:function(){$(document).on("click",".btn-confirm-order",(function(r){r.preventDefault();var e=$(r.currentTarget);e.addClass("button-loading"),$.ajax({type:"POST",cache:!1,url:e.closest("form").prop("action"),data:e.closest("form").serialize(),success:function(r){r.error?kamruldashboard.showError(r.message):($("#main-order-content").load(window.location.href+" #main-order-content > *"),e.closest("div").remove(),kamruldashboard.showSuccess(r.message)),e.removeClass("button-loading")},error:function(r){kamruldashboard.handleError(r),e.removeClass("button-loading")}})})),$(document).on("click",".btn-trigger-resend-order-confirmation-modal",(function(r){r.preventDefault(),$("#confirm-resend-confirmation-email-button").data("action",$(r.currentTarget).data("action")),$("#resend-order-confirmation-email-modal").modal("show")})),$(document).on("click","#confirm-resend-confirmation-email-button",(function(r){r.preventDefault();var e=$(r.currentTarget);e.addClass("button-loading"),$.ajax({type:"POST",cache:!1,url:e.data("action"),success:function(r){r.error?kamruldashboard.showError(r.message):kamruldashboard.showSuccess(r.message),e.removeClass("button-loading"),$("#resend-order-confirmation-email-modal").modal("hide")},error:function(r){kamruldashboard.handleError(r),e.removeClass("button-loading")}})})),$(document).on("click",".btn-trigger-shipment",(function(r){r.preventDefault();var e=$(r.currentTarget),a=$(".shipment-create-wrap");a.toggleClass("hidden"),a.hasClass("shipment-data-loaded")||(kamruldashboard.blockUI({target:a,iconOnly:!0,overlayColor:"none"}),$.ajax({url:e.data("target"),type:"GET",success:function(r){r.error?kamruldashboard.showError(r.message):(a.html(r.data),a.addClass("shipment-data-loaded"),kamruldashboard.initResources()),kamruldashboard.unblockUI(a)},error:function(r){kamruldashboard.handleError(r),kamruldashboard.unblockUI(a)}}))})),$(document).on("change","#store_id",(function(r){var e=$(".shipment-create-wrap");kamruldashboard.blockUI({target:e,iconOnly:!0,overlayColor:"none"}),$("#select-shipping-provider").load($(".btn-trigger-shipment").data("target")+"?view=true&store_id="+$(r.currentTarget).val()+" #select-shipping-provider > *",(function(){kamruldashboard.unblockUI(e),kamruldashboard.initResources()}))})),$(document).on("change",".shipment-form-weight",(function(r){var e=$(".shipment-create-wrap");kamruldashboard.blockUI({target:e,iconOnly:!0,overlayColor:"none"}),$("#select-shipping-provider").load($(".btn-trigger-shipment").data("target")+"?view=true&store_id="+$("#store_id").val()+"&weight="+$(r.currentTarget).val()+" #select-shipping-provider > *",(function(){kamruldashboard.unblockUI(e),kamruldashboard.initResources()}))})),$(document).on("click",".table-shipping-select-options .clickable-row",(function(r){var e=$(r.currentTarget);$(".input-hidden-shipping-method").val(e.data("key")),$(".input-hidden-shipping-option").val(e.data("option")),$(".input-show-shipping-method").val(e.find("span.ws-nm").text())})),$(document).on("click",".btn-create-shipment",(function(r){r.preventDefault();var e=$(r.currentTarget);e.addClass("button-loading"),$.ajax({type:"POST",cache:!1,url:e.closest("form").prop("action"),data:e.closest("form").serialize(),success:function(r){r.error?kamruldashboard.showError(r.message):(kamruldashboard.showSuccess(r.message),$("#main-order-content").load(window.location.href+" #main-order-content > *"),$(".btn-trigger-shipment").remove()),e.removeClass("button-loading")},error:function(r){kamruldashboard.handleError(r),e.removeClass("button-loading")}})})),$(document).on("click",".btn-cancel-shipment",(function(r){r.preventDefault(),$("#confirm-cancel-shipment-button").data("action",$(r.currentTarget).data("action")),$("#cancel-shipment-modal").modal("show")})),$(document).on("click","#confirm-cancel-shipment-button",(function(r){r.preventDefault();var e=$(r.currentTarget);e.addClass("button-loading"),$.ajax({type:"POST",cache:!1,url:e.data("action"),success:function(r){r.error?kamruldashboard.showError(r.message):(kamruldashboard.showSuccess(r.message),$(".carrier-status").addClass("carrier-status-"+r.data.status).text(r.data.status_text),$("#cancel-shipment-modal").modal("hide"),$("#order-history-wrapper").load(window.location.href+" #order-history-wrapper > *"),$(".shipment-actions-wrapper").remove()),e.removeClass("button-loading")},error:function(r){kamruldashboard.handleError(r),e.removeClass("button-loading")}})})),$(document).on("click",".btn-close-shipment-panel",(function(r){r.preventDefault(),$(".shipment-create-wrap").addClass("hidden")})),$(document).on("click",".btn-trigger-update-shipping-address",(function(r){r.preventDefault(),$("#update-shipping-address-modal").modal("show")})),$(document).on("click","#confirm-update-shipping-address-button",(function(r){r.preventDefault();var e=$(r.currentTarget);e.addClass("button-loading"),$.ajax({type:"POST",cache:!1,url:e.closest(".modal-content").find("form").prop("action"),data:e.closest(".modal-content").find("form").serialize(),success:function(r){if(r.error)kamruldashboard.showError(r.message);else{kamruldashboard.showSuccess(r.message),$("#update-shipping-address-modal").modal("hide"),$(".shipment-address-box-1").html(r.data.line),$(".text-infor-subdued.shipping-address-info").html(r.data.detail);var a=$(".shipment-create-wrap");kamruldashboard.blockUI({target:a,iconOnly:!0,overlayColor:"none"}),$("#select-shipping-provider").load($(".btn-trigger-shipment").data("target")+"?view=true #select-shipping-provider > *",(function(){kamruldashboard.unblockUI(a),kamruldashboard.initResources()}))}e.removeClass("button-loading")},error:function(r){kamruldashboard.handleError(r),e.removeClass("button-loading")}})})),$(document).on("click",".btn-update-order",(function(r){r.preventDefault();var e=$(r.currentTarget);e.addClass("button-loading"),$.ajax({type:"POST",cache:!1,url:e.closest("form").prop("action"),data:e.closest("form").serialize(),success:function(r){r.error?kamruldashboard.showError(r.message):kamruldashboard.showSuccess(r.message),e.removeClass("button-loading")},error:function(r){kamruldashboard.handleError(r),e.removeClass("button-loading")}})})),$(document).on("click",".btn-trigger-cancel-order",(function(r){r.preventDefault(),$("#confirm-cancel-order-button").data("target",$(r.currentTarget).data("target")),$("#cancel-order-modal").modal("show")})),$(document).on("click","#confirm-cancel-order-button",(function(r){r.preventDefault();var e=$(r.currentTarget);e.addClass("button-loading"),$.ajax({type:"POST",cache:!1,url:e.data("target"),success:function(r){r.error?kamruldashboard.showError(r.message):(kamruldashboard.showSuccess(r.message),$("#main-order-content").load(window.location.href+" #main-order-content > *"),$("#cancel-order-modal").modal("hide")),e.removeClass("button-loading")},error:function(r){kamruldashboard.handleError(r),e.removeClass("button-loading")}})})),$(document).on("click",".btn-trigger-confirm-payment",(function(r){r.preventDefault(),$("#confirm-payment-order-button").data("target",$(r.currentTarget).data("target")),$("#confirm-payment-modal").modal("show")})),$(document).on("click","#confirm-payment-order-button",(function(r){r.preventDefault();var e=$(r.currentTarget);e.addClass("button-loading"),$.ajax({type:"POST",cache:!1,url:e.data("target"),success:function(r){r.error?kamruldashboard.showError(r.message):(kamruldashboard.showSuccess(r.message),$("#main-order-content").load(window.location.href+" #main-order-content > *"),$("#confirm-payment-modal").modal("hide")),e.removeClass("button-loading")},error:function(r){kamruldashboard.handleError(r),e.removeClass("button-loading")}})})),$(document).on("click",".show-timeline-dropdown",(function(r){r.preventDefault(),$($(r.currentTarget).data("target")).slideToggle(),$(r.currentTarget).closest(".comment-log-item").toggleClass("bg-white")})),$(document).on("keyup",".input-sync-item",(function(r){var e=$(r.currentTarget).val();e&&!isNaN(e)||(e=0),$(r.currentTarget).closest(".page-content").find($(r.currentTarget).data("target")).text(kamruldashboard.numberFormat(parseFloat(e),2))})),$(document).on("click",".btn-trigger-refund",(function(r){r.preventDefault(),$("#confirm-refund-modal").modal("show")})),$(document).on("change",".j-refund-quantity",(function(){var r=0;$.each($(".j-refund-quantity"),(function(e,a){var o=$(a).val();o&&!isNaN(o)||(o=0),r+=parseFloat(o)})),$(".total-restock-items").text(r)})),$(document).on("click","#confirm-refund-payment-button",(function(r){r.preventDefault();var e=$(r.currentTarget);e.addClass("button-loading"),$.ajax({type:"POST",cache:!1,url:e.closest(".modal-dialog").find("form").prop("action"),data:e.closest(".modal-dialog").find("form").serialize(),success:function(r){r.error?kamruldashboard.showError(r.message):r.data&&r.data.refund_redirect_url?window.location.href=r.data.refund_redirect_url:($("#main-order-content").load(window.location.href+" #main-order-content > *"),kamruldashboard.showSuccess(r.message),e.closest(".modal").modal("hide")),e.removeClass("button-loading")},error:function(r){kamruldashboard.handleError(r),e.removeClass("button-loading")}})})),$(document).on("click",".btn-trigger-update-shipping-status",(function(r){r.preventDefault(),$("#update-shipping-status-modal").modal("show")})),$(document).on("click","#confirm-update-shipping-status-button",(function(r){r.preventDefault();var e=$(r.currentTarget);e.addClass("button-loading"),$.ajax({type:"POST",cache:!1,url:e.closest(".modal-dialog").find("form").prop("action"),data:e.closest(".modal-dialog").find("form").serialize(),success:function(r){r.error?kamruldashboard.showError(r.message):($("#main-order-content").load(window.location.href+" #main-order-content > *"),kamruldashboard.showSuccess(r.message),e.closest(".modal").modal("hide")),e.removeClass("button-loading")},error:function(r){kamruldashboard.handleError(r),e.removeClass("button-loading")}})}))}}])&&e(a.prototype,o),t&&e(a,t),Object.defineProperty(a,"prototype",{writable:!1}),r}();$(document).ready((function(){(new a).init()}))})();