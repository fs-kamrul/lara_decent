(()=>{function e(a){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(a)}function a(a,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(a,(r=o.key,l=void 0,l=function(a,t){if("object"!==e(a)||null===a)return a;var n=a[Symbol.toPrimitive];if(void 0!==n){var o=n.call(a,t||"default");if("object"!==e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(a)}(r,"string"),"symbol"===e(l)?l:String(l)),o)}var r,l}!function(e,t){"use strict";var n=function(a,t){var n=a.ajax.params();return n.action=t,n._token=e('meta[name="csrf-token"]').attr("content"),n},o=function(a,t){var n=a+"/export",o=new XMLHttpRequest;o.open("POST",n,!0),o.responseType="arraybuffer",o.onload=function(){if(200===this.status){var e="",a=o.getResponseHeader("Content-Disposition");if(a&&-1!==a.indexOf("attachment")){var t=/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/.exec(a);null!=t&&t[1]&&(e=t[1].replace(/['"]/g,""))}var n=o.getResponseHeader("Content-Type"),r=new Blob([this.response],{type:n});if(void 0!==window.navigator.msSaveBlob)window.navigator.msSaveBlob(r,e);else{var l=window.URL||window.webkitURL,s=l.createObjectURL(r);if(e){var c=document.createElement("a");void 0===c.download?window.location=s:(c.href=s,c.download=e,document.body.appendChild(c),c.trigger("click"))}else window.location=s;setTimeout((function(){l.revokeObjectURL(s)}),100)}}},o.setRequestHeader("Content-type","application/x-www-form-urlencoded"),o.send(e.param(t))},r=function(a,t){var n=a.ajax.url()||"",o=a.ajax.params();return o.action=t,n.indexOf("?")>-1?n+"&"+e.param(o):n+"?"+e.param(o)};t.ext.buttons.excel={className:"buttons-excel",text:function(e){return'<i class="fa fa-file-excel-o"></i> '+e.i18n("buttons.excel",KamrulVariables.languages.tables.excel?KamrulVariables.languages.tables.excel:"Excel")},action:function(e,a){window.location=r(a,"excel")}},t.ext.buttons.postExcel={className:"buttons-excel",text:function(e){return'<i class="fa fa-file-excel-o"></i> '+e.i18n("buttons.excel",KamrulVariables.languages.tables.excel?KamrulVariables.languages.tables.excel:"Excel")},action:function(e,a){var t=a.ajax.url()||window.location.href,r=n(a,"excel");o(t,r)}},t.ext.buttons.export={extend:"collection",className:"buttons-export",text:function(e){return'<i class="fa fa-download"></i> '+e.i18n("buttons.export",KamrulVariables.languages.tables.export?KamrulVariables.languages.tables.export:"Export")+'&nbsp;<span class="caret"/>'},buttons:["csv","excel","pdf"]},t.ext.buttons.csv={className:"buttons-csv",text:function(e){return'<i class="fa fa-file-o"></i> '+e.i18n("buttons.csv",KamrulVariables.languages.tables.csv?KamrulVariables.languages.tables.csv:"CSV")},action:function(e,a){window.location=r(a,"csv")}},t.ext.buttons.postCsv={className:"buttons-csv",text:function(e){return'<i class="fa fa-file-o"></i> '+e.i18n("buttons.csv",KamrulVariables.languages.tables.csv?KamrulVariables.languages.tables.csv:"CSV")},action:function(e,a){var t=a.ajax.url()||window.location.href,r=n(a,"csv");o(t,r)}},t.ext.buttons.pdf={className:"buttons-pdf",text:function(e){return'<i class="fa fa-file-pdf-o"></i> '+e.i18n("buttons.pdf","PDF")},action:function(e,a){window.location=r(a,"pdf")}},t.ext.buttons.postPdf={className:"buttons-pdf",text:function(e){return'<i class="fa fa-file-pdf-o"></i> '+e.i18n("buttons.pdf","PDF")},action:function(e,a){var t=a.ajax.url()||window.location.href,r=n(a,"pdf");o(t,r)}},t.ext.buttons.print={className:"buttons-print",text:function(e){return'<i class="fa fa-print"></i> '+e.i18n("buttons.print",KamrulVariables.languages.tables.print?KamrulVariables.languages.tables.print:"Print")},action:function(e,a){window.location=r(a,"print")}},t.ext.buttons.reset={className:"buttons-reset",text:function(e){return'<i class="fa fa-undo"></i> '+e.i18n("buttons.reset",KamrulVariables.languages.tables.reset?KamrulVariables.languages.tables.reset:"Reset")},action:function(){e(".table thead input").val("").keyup(),e(".table thead select").val("").change()}},t.ext.buttons.reload={className:"buttons-reload",text:function(e){return'<i class="fas fa-sync"></i> '+e.i18n("buttons.reload",KamrulVariables.languages.tables.reload?KamrulVariables.languages.tables.reload:"Reload")},action:function(e,a){a.draw(!1)}},t.ext.buttons.create={className:"buttons-create",text:function(e){return'<i class="fa fa-plus"></i> '+e.i18n("buttons.create","Create")},action:function(){window.location=window.location.href.replace(/\/+$/,"")+"/create"}},void 0!==t.ext.buttons.copyHtml5&&e.extend(t.ext.buttons.copyHtml5,{text:function(e){return'<i class="fa fa-copy"></i> '+e.i18n("buttons.copy","Copy")}}),void 0!==t.ext.buttons.colvis&&e.extend(t.ext.buttons.colvis,{text:function(e){return'<i class="fa fa-eye"></i> '+e.i18n("buttons.colvis","Column visibility")}});var l=function(){function t(){!function(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this,t),this.init(),this.handleActionsRow(),this.handleActionsExport()}var n,o,r;return n=t,(o=[{key:"init",value:function(){e(document).on("change",".table-check-all",(function(a){var t=e(a.currentTarget),n=t.attr("data-set"),o=t.prop("checked");e(n).each((function(a,t){o?e(t).prop("checked",!0):e(t).prop("checked",!1)}))})),e(document).find(".table-check-all").closest("th").removeAttr("title"),e(document).on("change",".checkboxes",(function(a){var t=e(a.currentTarget),n=t.closest(".table-wrapper").find(".table").prop("id"),o=[],r=e("#"+n);r.find(".checkboxes:checked").each((function(a,t){o[a]=e(t).val()})),o.length!==r.find(".checkboxes").length?t.closest(".table-wrapper").find(".table-check-all").prop("checked",!1):t.closest(".table-wrapper").find(".table-check-all").prop("checked",!0)})),e(document).on("click",".btn-show-table-options",(function(a){a.preventDefault(),e(a.currentTarget).closest(".table-wrapper").find(".table-configuration-wrap").slideToggle(500)})),e(document).on("click",".action-item",(function(a){a.preventDefault();var t=e(a.currentTarget).find("span[data-href]"),n=t.data("action"),o=t.data("href");n&&"#"!==o&&(window.location.href=o)}))}},{key:"handleActionsRow",value:function(){var a=this;e(document).on("click",".deleteDialog",(function(a){a.preventDefault();var t=e(a.currentTarget);e(".delete-crud-entry").data("section",t.data("section")).data("parent-table",t.closest(".table").prop("id")),e(".modal-confirm-delete").modal("show")})),e(".delete-crud-entry").on("click",(function(a){a.preventDefault();var t=e(a.currentTarget);t.addClass("button-loading");var n=t.data("section");e.ajax({url:n,type:"POST",data:{_method:"DELETE"},success:function(a){a.error?kamruldashboard.showError(a.message):(window.LaravelDataTables[t.data("parent-table")].row(e('a[data-section="'+n+'"]').closest("tr")).remove().draw(),kamruldashboard.showSuccess(a.message)),t.closest(".modal").modal("hide"),t.removeClass("button-loading")},error:function(e){kamruldashboard.handleError(e),t.removeClass("button-loading")}})})),e(document).on("click",".delete-many-entry-trigger",(function(a){a.preventDefault();var t=e(a.currentTarget),n=t.closest(".table-wrapper").find(".table").prop("id"),o=[];if(e("#"+n).find(".checkboxes:checked").each((function(a,t){o[a]=e(t).val()})),0===o.length)return kamruldashboard.showError(KamrulVariables.languages.tables.please_select_record?KamrulVariables.languages.tables.please_select_record:"Please select at least one record to perform this action!"),!1;e(".delete-many-entry-button").data("href",t.prop("href")).data("parent-table",n).data("class-item",t.data("class-item")),e(".delete-many-modal").modal("show")})),e(".delete-many-entry-button").on("click",(function(a){a.preventDefault();var t=e(a.currentTarget);t.addClass("button-loading");var n=e("#"+t.data("parent-table")),o=[];n.find(".checkboxes:checked").each((function(a,t){o[a]=e(t).val()})),e.ajax({url:t.data("href"),type:"POST",data:{_method:"DELETE",ids:o,class:t.data("class-item")},success:function(e){e.error?kamruldashboard.showError(e.message):kamruldashboard.showSuccess(e.message),n.find(".table-check-all").prop("checked",!1),window.LaravelDataTables[t.data("parent-table")].draw(),t.closest(".modal").modal("hide"),t.removeClass("button-loading")},error:function(e){kamruldashboard.handleError(e),t.removeClass("button-loading")}})})),e(document).on("click",".bulk-change-item",(function(t){t.preventDefault();var n=e(t.currentTarget),o=n.closest(".table-wrapper").find(".table").prop("id"),r=[];if(e("#"+o).find(".checkboxes:checked").each((function(a,t){r[a]=e(t).val()})),0===r.length)return kamruldashboard.showError(KamrulVariables.languages.tables.please_select_record?KamrulVariables.languages.tables.please_select_record:"Please select at least one record to perform this action!"),!1;a.loadBulkChangeData(n),e(".confirm-bulk-change-button").data("parent-table",o).data("class-item",n.data("class-item")).data("key",n.data("key")).data("url",n.data("save-url")),e(".modal-bulk-change-items").modal("show")})),e(document).on("click",".confirm-bulk-change-button",(function(a){a.preventDefault();var t=e(a.currentTarget),n=t.closest(".modal").find(".input-value").val(),o=t.data("key"),r=e("#"+t.data("parent-table")),l=[];r.find(".checkboxes:checked").each((function(a,t){l[a]=e(t).val()})),t.addClass("button-loading"),e.ajax({url:t.data("url"),type:"POST",data:{ids:l,key:o,value:n,class:t.data("class-item")},success:function(a){a.error?kamruldashboard.showError(a.message):kamruldashboard.showSuccess(a.message),r.find(".table-check-all").prop("checked",!1),e.each(l,(function(e,a){window.LaravelDataTables[t.data("parent-table")].row(r.find('.checkboxes[value="'+a+'"]').closest("tr")).remove().draw()})),t.closest(".modal").modal("hide"),t.removeClass("button-loading")},error:function(e){kamruldashboard.handleError(e),t.removeClass("button-loading")}})}))}},{key:"loadBulkChangeData",value:function(a){var t=e(".modal-bulk-change-items");e.ajax({type:"GET",url:t.find(".confirm-bulk-change-button").data("load-url"),data:{class:a.data("class-item"),key:a.data("key")},success:function(a){var n=e.map(a.data,(function(e,a){return{id:a,name:e}}));e(".modal-bulk-change-content").html(a.html);var o=t.find("input[type=text].input-value");o.length&&(o.typeahead({source:n}),o.data("typeahead").source=n),kamruldashboard.initResources()},error:function(e){kamruldashboard.handleError(e)}})}},{key:"handleActionsExport",value:function(){e(document).on("click",".export-data",(function(a){var t=e(a.currentTarget),n=t.closest(".table-wrapper").find(".table").prop("id"),o=[];e("#"+n).find(".checkboxes:checked").each((function(a,t){o[a]=e(t).val()})),a.preventDefault(),e.ajax({type:"POST",url:t.prop("href"),data:{"ids-checked":o},success:function(e){var a=document.createElement("a");a.href=e.file,a.download=e.name,document.body.appendChild(a),a.trigger("click"),a.remove()},error:function(e){kamruldashboard.handleError(e)}})}))}}])&&a(n.prototype,o),r&&a(n,r),Object.defineProperty(n,"prototype",{writable:!1}),t}();e(document).ready((function(){new l}))}(jQuery,jQuery.fn.dataTable)})();